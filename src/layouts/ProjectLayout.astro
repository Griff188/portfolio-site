---
import Layout from './Layout.astro';

export interface Props {
  title: string;
  role: string;
  description: string;
  notes?: string;
}

const { title, role, description, notes } = Astro.props;
---

<Layout>
	<main class="project-page">
		<a href="/" class="back-button">‚Üê Back</a>
		
		<div class="project-header">
			<h1>{title}</h1>
			<p> <strong>Griffin Rabins: </strong>{role}<br /><strong>{description}</strong> <br/><br/><br/>{notes}</p>
		</div>

		<slot />
	</main>

	<!-- Modal -->
	<div id="myModal" class="modal">
		<!-- Close button (X) -->
		<span class="close">&times;</span>
		<!-- Image inside each modal -->
		<img class="modal-content" id="img01">
	</div>

	<script>
		// modal container
		var modal = document.getElementById("myModal") as HTMLElement;

		// image inside modal container
		var modalImg = document.getElementById("img01") as HTMLImageElement;

		// close (X) button
		var span = document.getElementsByClassName("close")[0] as HTMLElement;

		// close modal when X button is clicked
		span.addEventListener("click", function(event) { 
			event.stopPropagation();
			modal.style.display = "none";
		});

		// close modal when outside area is clicked
		modal.addEventListener("click", function() {
			modal.style.display = "none";
		});

		// disable modal close when image is clicked
		modalImg.addEventListener("click", function(event) {
			event.stopPropagation();
		});

		// get all images in .column containers
		var images = document.querySelectorAll('.column img');

		// add click listeners to each image
		images.forEach(function(img) {
			img.addEventListener("click", function(this: HTMLImageElement){
				modal.style.display = "block";
				modalImg.src = this.src;
			});
		});
	</script>

	<style is:global>
		.project-page {
			position: relative;
			padding-top: 3rem; /* Space for back button */
		}

		.back-button {
			position: absolute;
			top: 1rem;
			left: 1rem;
			/* color: #333; */
			color: white;
			text-decoration: none;
			font-size: 1rem;
			padding: 0.5rem 1rem;
			border-radius: 4px;
			/* background-color: #f9f9f9; */
			background-color: rgb(25, 28, 31);
			transition: background-color 0.3s;
			z-index: 10;
		}

		.back-button:hover {
			/* background-color: #e9e9e9; */
			background-color: rgb(56, 62, 68);
		}

		/* space for title and description of show */
		.project-header {
			text-align: center;
			margin-bottom: 2rem;
			/* max-width: 600px; */
			max-width: auto;
			margin-left: auto;
			margin-right: auto;
		}

		.project-header h1 {
			margin-bottom: 0.5rem;
		}

		* {
			box-sizing: border-box;
		}
		

		.header {
			text-align: center;
			padding: 32px;
		}

		#myImg {
			border-radius: 5px;
			cursor: pointer;
			transition: 0.3s;
		}

		#myImg:hover {opacity: 0.9;}

		/* image grid: rows */
		.row {
			display: -ms-flexbox;
			display: flex;
			-ms-flex-wrap: wrap;
			flex-wrap: wrap;
			padding: 0 4px;
		}

		/* image grid: two columns */
		.column {
			-ms-flex: 50%;
			flex: 50%;
			padding: 0 4px;
		}

		/* image inside column */
		.column img {
			margin-top: 8px;
			vertical-align: middle;
			cursor: pointer;
		}

		/* modal background overlay */
		.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 1000; /* Sit on top */
			padding-top: 10px; /* Location of the box */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scroll if needed */
			background-color: rgb(0,0,0); /* Fallback color */
			background-color: rgba(0,0,0,0.95); /* Black w/ opacity */
			cursor: pointer;
		}

		/* Modal Content (image) */
		.modal-content {
			margin: auto;
			display: block;
			width: 80%;
			max-width: 1000px;
			cursor: default;
		}

		/* zoom animation */
		.modal-content {  
			-webkit-animation-name: zoom;
			-webkit-animation-duration: 0.1s;
			animation-name: zoom;
			animation-duration: 0.2s;
		}

		@-webkit-keyframes zoom {
			from {-webkit-transform:scale(0)} 
			to {-webkit-transform:scale(1)}
		}

		@keyframes zoom {
			from {transform:scale(0)} 
			to {transform:scale(1)}
		}

		/* close button */
		.close {
			position: absolute;
			top: 15px;
			right: 35px;
			color: #f1f1f1;
			font-size: 40px;
			font-weight: bold;
			transition: 0.3s;
		}

		.close:hover,
		.close:focus {
			color: #bbb;
			text-decoration: none;
			cursor: pointer;
		}

		/* 100% Image Width on Smaller Screens */
		@media only screen and (max-width: 768px){
			.modal-content {
				width: 100%;
			}

			.column {
			-ms-flex: 100%;
			flex: 100%;
			}
		}

	</style>
</Layout>

